package jp.juggler.tmvolume

import kotlin.math.abs
import kotlin.math.max
import kotlin.math.min

object FaderVol {

    private val params = doubleArrayOf(
        // db, faderMin, faderMax,
        -66.0, 0.0000, 0.0000,
        -65.0, 0.0001, 0.0003,
        -64.9, 0.0004, 0.0009,
        -64.8, 0.0010, 0.0016,
        -64.7, 0.0017, 0.0022,
        -64.6, 0.0023, 0.0029,
        -64.5, 0.0030, 0.0035,
        -64.4, 0.0036, 0.0042,
        -64.3, 0.0043, 0.0049,
        -64.2, 0.0050, 0.0055,
        -64.1, 0.0056, 0.0062,
        -64.0, 0.0063, 0.0068,
        -63.9, 0.0069, 0.0075,
        -63.8, 0.0076, 0.0082,
        -63.7, 0.0083, 0.0088,
        -63.6, 0.0089, 0.0095,
        -63.5, 0.0096, 0.0101,
        -63.4, 0.0102, 0.0108,
        -63.3, 0.0109, 0.0115,
        -63.2, 0.0116, 0.0121,
        -63.1, 0.0122, 0.0128,
        -63.0, 0.0129, 0.0134,
        -62.9, 0.0135, 0.0141,
        -62.8, 0.0142, 0.0148,
        -62.7, 0.0149, 0.0154,
        -62.6, 0.0155, 0.0161,
        -62.5, 0.0162, 0.0168,
        -62.4, 0.0169, 0.0174,
        -62.3, 0.0175, 0.0181,
        -62.2, 0.0182, 0.0188,
        -62.1, 0.0189, 0.0194,
        -62.0, 0.0195, 0.0201,
        -61.9, 0.0202, 0.0208,
        -61.8, 0.0209, 0.0215,
        -61.7, 0.0216, 0.0221,
        -61.6, 0.0222, 0.0228,
        -61.5, 0.0229, 0.0235,
        -61.4, 0.0236, 0.0241,
        -61.3, 0.0242, 0.0248,
        -61.2, 0.0249, 0.0255,
        -61.1, 0.0256, 0.0262,
        -61.0, 0.0263, 0.0268,
        -60.9, 0.0269, 0.0275,
        -60.8, 0.0276, 0.0282,
        -60.7, 0.0283, 0.0289,
        -60.6, 0.0290, 0.0295,
        -60.5, 0.0296, 0.0302,
        -60.4, 0.0303, 0.0309,
        -60.3, 0.0310, 0.0316,
        -60.2, 0.0317, 0.0323,
        -60.1, 0.0324, 0.0329,
        -60.0, 0.0330, 0.0336,
        -59.9, 0.0337, 0.0343,
        -59.8, 0.0344, 0.0350,
        -59.7, 0.0351, 0.0357,
        -59.6, 0.0358, 0.0364,
        -59.5, 0.0365, 0.0370,
        -59.4, 0.0371, 0.0377,
        -59.3, 0.0378, 0.0384,
        -59.2, 0.0385, 0.0391,
        -59.1, 0.0392, 0.0398,
        -59.0, 0.0399, 0.0405,
        -58.9, 0.0406, 0.0412,
        -58.8, 0.0413, 0.0418,
        -58.7, 0.0419, 0.0425,
        -58.6, 0.0426, 0.0432,
        -58.5, 0.0433, 0.0439,
        -58.4, 0.0440, 0.0446,
        -58.3, 0.0447, 0.0453,
        -58.2, 0.0454, 0.0460,
        -58.1, 0.0461, 0.0467,
        -58.0, 0.0468, 0.0474,
        -57.9, 0.0475, 0.0481,
        -57.8, 0.0482, 0.0488,
        -57.7, 0.0489, 0.0495,
        -57.6, 0.0496, 0.0501,
        -57.5, 0.0502, 0.0508,
        -57.4, 0.0509, 0.0515,
        -57.3, 0.0516, 0.0522,
        -57.2, 0.0523, 0.0529,
        -57.1, 0.0530, 0.0536,
        -57.0, 0.0537, 0.0543,
        -56.9, 0.0544, 0.0550,
        -56.8, 0.0551, 0.0557,
        -56.7, 0.0558, 0.0564,
        -56.6, 0.0565, 0.0571,
        -56.5, 0.0572, 0.0578,
        -56.4, 0.0579, 0.0585,
        -56.3, 0.0586, 0.0593,
        -56.2, 0.0594, 0.0600,
        -56.1, 0.0601, 0.0607,
        -56.0, 0.0608, 0.0614,
        -55.9, 0.0615, 0.0621,
        -55.8, 0.0622, 0.0628,
        -55.7, 0.0629, 0.0635,
        -55.6, 0.0636, 0.0642,
        -55.5, 0.0643, 0.0649,
        -55.4, 0.0650, 0.0656,
        -55.3, 0.0657, 0.0663,
        -55.2, 0.0664, 0.0670,
        -55.1, 0.0671, 0.0678,
        -55.0, 0.0679, 0.0685,
        -54.9, 0.0686, 0.0692,
        -54.8, 0.0693, 0.0699,
        -54.7, 0.0700, 0.0706,
        -54.6, 0.0707, 0.0713,
        -54.5, 0.0714, 0.0720,
        -54.4, 0.0721, 0.0728,
        -54.3, 0.0729, 0.0735,
        -54.2, 0.0736, 0.0742,
        -54.1, 0.0743, 0.0749,
        -54.0, 0.0750, 0.0756,
        -53.9, 0.0757, 0.0764,
        -53.8, 0.0765, 0.0771,
        -53.7, 0.0772, 0.0778,
        -53.6, 0.0779, 0.0785,
        -53.5, 0.0786, 0.0792,
        -53.4, 0.0793, 0.0800,
        -53.3, 0.0801, 0.0807,
        -53.2, 0.0808, 0.0814,
        -53.1, 0.0815, 0.0821,
        -53.0, 0.0822, 0.0829,
        -52.9, 0.0830, 0.0836,
        -52.8, 0.0837, 0.0843,
        -52.7, 0.0844, 0.0851,
        -52.6, 0.0852, 0.0858,
        -52.5, 0.0859, 0.0865,
        -52.4, 0.0866, 0.0873,
        -52.3, 0.0874, 0.0880,
        -52.2, 0.0881, 0.0887,
        -52.1, 0.0888, 0.0895,
        -52.0, 0.0896, 0.0902,
        -51.9, 0.0903, 0.0909,
        -51.8, 0.0910, 0.0917,
        -51.7, 0.0918, 0.0924,
        -51.6, 0.0925, 0.0931,
        -51.5, 0.0932, 0.0939,
        -51.4, 0.0940, 0.0946,
        -51.3, 0.0947, 0.0954,
        -51.2, 0.0955, 0.0961,
        -51.1, 0.0962, 0.0968,
        -51.0, 0.0969, 0.0976,
        -50.9, 0.0977, 0.0983,
        -50.8, 0.0984, 0.0991,
        -50.7, 0.0992, 0.0998,
        -50.6, 0.0999, 0.1006,
        -50.5, 0.1007, 0.1013,
        -50.4, 0.1014, 0.1020,
        -50.3, 0.1021, 0.1028,
        -50.2, 0.1029, 0.1035,
        -50.1, 0.1036, 0.1043,
        -50.0, 0.1044, 0.1050,
        -49.9, 0.1051, 0.1058,
        -49.8, 0.1059, 0.1065,
        -49.7, 0.1066, 0.1073,
        -49.6, 0.1074, 0.1081,
        -49.5, 0.1082, 0.1088,
        -49.4, 0.1089, 0.1096,
        -49.3, 0.1097, 0.1103,
        -49.2, 0.1104, 0.1111,
        -49.1, 0.1112, 0.1118,
        -49.0, 0.1119, 0.1126,
        -48.9, 0.1127, 0.1133,
        -48.8, 0.1134, 0.1141,
        -48.7, 0.1142, 0.1149,
        -48.6, 0.1150, 0.1156,
        -48.5, 0.1157, 0.1164,
        -48.4, 0.1165, 0.1172,
        -48.3, 0.1173, 0.1179,
        -48.2, 0.1180, 0.1187,
        -48.1, 0.1188, 0.1194,
        -48.0, 0.1195, 0.1202,
        -47.9, 0.1203, 0.1210,
        -47.8, 0.1211, 0.1218,
        -47.7, 0.1219, 0.1225,
        -47.6, 0.1226, 0.1233,
        -47.5, 0.1234, 0.1241,
        -47.4, 0.1242, 0.1248,
        -47.3, 0.1249, 0.1256,
        -47.2, 0.1257, 0.1264,
        -47.1, 0.1265, 0.1272,
        -47.0, 0.1273, 0.1279,
        -46.9, 0.1280, 0.1287,
        -46.8, 0.1288, 0.1295,
        -46.7, 0.1296, 0.1303,
        -46.6, 0.1304, 0.1310,
        -46.5, 0.1311, 0.1318,
        -46.4, 0.1319, 0.1326,
        -46.3, 0.1327, 0.1334,
        -46.2, 0.1335, 0.1342,
        -46.1, 0.1343, 0.1349,
        -46.0, 0.1350, 0.1357,
        -45.9, 0.1358, 0.1365,
        -45.8, 0.1366, 0.1373,
        -45.7, 0.1374, 0.1381,
        -45.6, 0.1382, 0.1389,
        -45.5, 0.1390, 0.1397,
        -45.4, 0.1398, 0.1405,
        -45.3, 0.1406, 0.1413,
        -45.2, 0.1414, 0.1420,
        -45.1, 0.1421, 0.1428,
        -45.0, 0.1429, 0.1436,
        -44.9, 0.1437, 0.1444,
        -44.8, 0.1445, 0.1452,
        -44.7, 0.1453, 0.1460,
        -44.6, 0.1461, 0.1468,
        -44.5, 0.1469, 0.1476,
        -44.4, 0.1477, 0.1484,
        -44.3, 0.1485, 0.1492,
        -44.2, 0.1493, 0.1500,
        -44.1, 0.1501, 0.1508,
        -44.0, 0.1509, 0.1516,
        -43.9, 0.1517, 0.1524,
        -43.8, 0.1525, 0.1532,
        -43.7, 0.1533, 0.1540,
        -43.6, 0.1541, 0.1548,
        -43.5, 0.1549, 0.1556,
        -43.4, 0.1557, 0.1565,
        -43.3, 0.1566, 0.1573,
        -43.2, 0.1574, 0.1581,
        -43.1, 0.1582, 0.1589,
        -43.0, 0.1590, 0.1597,
        -42.9, 0.1598, 0.1605,
        -42.8, 0.1606, 0.1613,
        -42.7, 0.1614, 0.1622,
        -42.6, 0.1623, 0.1630,
        -42.5, 0.1631, 0.1638,
        -42.4, 0.1639, 0.1646,
        -42.3, 0.1647, 0.1654,
        -42.2, 0.1655, 0.1663,
        -42.1, 0.1664, 0.1671,
        -42.0, 0.1672, 0.1679,
        -41.9, 0.1680, 0.1687,
        -41.8, 0.1688, 0.1695,
        -41.7, 0.1696, 0.1704,
        -41.6, 0.1705, 0.1712,
        -41.5, 0.1713, 0.1720,
        -41.4, 0.1721, 0.1729,
        -41.3, 0.1730, 0.1737,
        -41.2, 0.1738, 0.1745,
        -41.1, 0.1746, 0.1754,
        -41.0, 0.1755, 0.1762,
        -40.9, 0.1763, 0.1770,
        -40.8, 0.1771, 0.1779,
        -40.7, 0.1780, 0.1787,
        -40.6, 0.1788, 0.1795,
        -40.5, 0.1796, 0.1804,
        -40.4, 0.1805, 0.1812,
        -40.3, 0.1813, 0.1821,
        -40.2, 0.1822, 0.1829,
        -40.1, 0.1830, 0.1838,
        -40.0, 0.1839, 0.1846,
        -39.9, 0.1847, 0.1854,
        -39.8, 0.1855, 0.1863,
        -39.7, 0.1864, 0.1871,
        -39.6, 0.1872, 0.1880,
        -39.5, 0.1881, 0.1888,
        -39.4, 0.1889, 0.1897,
        -39.3, 0.1898, 0.1906,
        -39.2, 0.1907, 0.1914,
        -39.1, 0.1915, 0.1923,
        -39.0, 0.1924, 0.1931,
        -38.9, 0.1932, 0.1940,
        -38.8, 0.1941, 0.1948,
        -38.7, 0.1949, 0.1957,
        -38.6, 0.1958, 0.1966,
        -38.5, 0.1967, 0.1974,
        -38.4, 0.1975, 0.1983,
        -38.3, 0.1984, 0.1992,
        -38.2, 0.1993, 0.2000,
        -38.1, 0.2001, 0.2009,
        -38.0, 0.2010, 0.2018,
        -37.9, 0.2019, 0.2026,
        -37.8, 0.2027, 0.2035,
        -37.7, 0.2036, 0.2044,
        -37.6, 0.2045, 0.2053,
        -37.5, 0.2054, 0.2061,
        -37.4, 0.2062, 0.2070,
        -37.3, 0.2071, 0.2079,
        -37.2, 0.2080, 0.2088,
        -37.1, 0.2089, 0.2097,
        -37.0, 0.2098, 0.2105,
        -36.9, 0.2106, 0.2114,
        -36.8, 0.2115, 0.2123,
        -36.7, 0.2124, 0.2132,
        -36.6, 0.2133, 0.2141,
        -36.5, 0.2142, 0.2150,
        -36.4, 0.2151, 0.2159,
        -36.3, 0.2160, 0.2167,
        -36.2, 0.2168, 0.2176,
        -36.1, 0.2177, 0.2185,
        -36.0, 0.2186, 0.2194,
        -35.9, 0.2195, 0.2203,
        -35.8, 0.2204, 0.2212,
        -35.7, 0.2213, 0.2221,
        -35.6, 0.2222, 0.2230,
        -35.5, 0.2231, 0.2239,
        -35.4, 0.2240, 0.2248,
        -35.3, 0.2249, 0.2257,
        -35.2, 0.2258, 0.2266,
        -35.1, 0.2267, 0.2276,
        -35.0, 0.2277, 0.2285,
        -34.9, 0.2286, 0.2294,
        -34.8, 0.2295, 0.2303,
        -34.7, 0.2304, 0.2312,
        -34.6, 0.2313, 0.2321,
        -34.5, 0.2322, 0.2330,
        -34.4, 0.2331, 0.2340,
        -34.3, 0.2341, 0.2349,
        -34.2, 0.2350, 0.2358,
        -34.1, 0.2359, 0.2367,
        -34.0, 0.2368, 0.2376,
        -33.9, 0.2377, 0.2386,
        -33.8, 0.2387, 0.2395,
        -33.7, 0.2396, 0.2404,
        -33.6, 0.2405, 0.2414,
        -33.5, 0.2415, 0.2423,
        -33.4, 0.2424, 0.2432,
        -33.3, 0.2433, 0.2442,
        -33.2, 0.2443, 0.2451,
        -33.1, 0.2452, 0.2460,
        -33.0, 0.2461, 0.2470,
        -32.9, 0.2471, 0.2479,
        -32.8, 0.2480, 0.2489,
        -32.7, 0.2490, 0.2498,
        -32.6, 0.2499, 0.2507,
        -32.5, 0.2508, 0.2517,
        -32.4, 0.2518, 0.2526,
        -32.3, 0.2527, 0.2536,
        -32.2, 0.2537, 0.2545,
        -32.1, 0.2546, 0.2555,
        -32.0, 0.2556, 0.2565,
        -31.9, 0.2566, 0.2574,
        -31.8, 0.2575, 0.2584,
        -31.7, 0.2585, 0.2593,
        -31.6, 0.2594, 0.2603,
        -31.5, 0.2604, 0.2613,
        -31.4, 0.2614, 0.2622,
        -31.3, 0.2623, 0.2632,
        -31.2, 0.2633, 0.2642,
        -31.1, 0.2643, 0.2651,
        -31.0, 0.2652, 0.2661,
        -30.9, 0.2662, 0.2671,
        -30.8, 0.2672, 0.2681,
        -30.7, 0.2682, 0.2690,
        -30.6, 0.2691, 0.2700,
        -30.5, 0.2701, 0.2710,
        -30.4, 0.2711, 0.2720,
        -30.3, 0.2721, 0.2730,
        -30.2, 0.2731, 0.2740,
        -30.1, 0.2741, 0.2749,
        -30.0, 0.2750, 0.2759,
        -29.9, 0.2760, 0.2769,
        -29.8, 0.2770, 0.2779,
        -29.7, 0.2780, 0.2789,
        -29.6, 0.2790, 0.2799,
        -29.5, 0.2800, 0.2809,
        -29.4, 0.2810, 0.2819,
        -29.3, 0.2820, 0.2829,
        -29.2, 0.2830, 0.2839,
        -29.1, 0.2840, 0.2849,
        -29.0, 0.2850, 0.2860,
        -28.9, 0.2861, 0.2870,
        -28.8, 0.2871, 0.2880,
        -28.7, 0.2881, 0.2890,
        -28.6, 0.2891, 0.2900,
        -28.5, 0.2901, 0.2910,
        -28.4, 0.2911, 0.2921,
        -28.3, 0.2922, 0.2931,
        -28.2, 0.2932, 0.2941,
        -28.1, 0.2942, 0.2951,
        -28.0, 0.2952, 0.2962,
        -27.9, 0.2963, 0.2972,
        -27.8, 0.2973, 0.2982,
        -27.7, 0.2983, 0.2993,
        -27.6, 0.2994, 0.3003,
        -27.5, 0.3004, 0.3013,
        -27.4, 0.3014, 0.3024,
        -27.3, 0.3025, 0.3034,
        -27.2, 0.3035, 0.3045,
        -27.1, 0.3046, 0.3055,
        -27.0, 0.3056, 0.3066,
        -26.9, 0.3067, 0.3076,
        -26.8, 0.3077, 0.3087,
        -26.7, 0.3088, 0.3097,
        -26.6, 0.3098, 0.3108,
        -26.5, 0.3109, 0.3119,
        -26.4, 0.3120, 0.3129,
        -26.3, 0.3130, 0.3140,
        -26.2, 0.3141, 0.3151,
        -26.1, 0.3152, 0.3161,
        -26.0, 0.3162, 0.3172,
        -25.9, 0.3173, 0.3183,
        -25.8, 0.3184, 0.3194,
        -25.7, 0.3195, 0.3205,
        -25.6, 0.3206, 0.3215,
        -25.5, 0.3216, 0.3226,
        -25.4, 0.3227, 0.3237,
        -25.3, 0.3238, 0.3248,
        -25.2, 0.3249, 0.3259,
        -25.1, 0.3260, 0.3270,
        -25.0, 0.3271, 0.3281,
        -24.9, 0.3282, 0.3292,
        -24.8, 0.3293, 0.3303,
        -24.7, 0.3304, 0.3314,
        -24.6, 0.3315, 0.3325,
        -24.5, 0.3326, 0.3336,
        -24.4, 0.3337, 0.3347,
        -24.3, 0.3348, 0.3359,
        -24.2, 0.3360, 0.3370,
        -24.1, 0.3371, 0.3381,
        -24.0, 0.3382, 0.3392,
        -23.9, 0.3393, 0.3403,
        -23.8, 0.3404, 0.3415,
        -23.7, 0.3416, 0.3426,
        -23.6, 0.3427, 0.3437,
        -23.5, 0.3438, 0.3449,
        -23.4, 0.3450, 0.3460,
        -23.3, 0.3461, 0.3472,
        -23.2, 0.3473, 0.3483,
        -23.1, 0.3484, 0.3495,
        -23.0, 0.3496, 0.3506,
        -22.9, 0.3507, 0.3518,
        -22.8, 0.3519, 0.3529,
        -22.7, 0.3530, 0.3541,
        -22.6, 0.3542, 0.3553,
        -22.5, 0.3554, 0.3564,
        -22.4, 0.3565, 0.3576,
        -22.3, 0.3577, 0.3588,
        -22.2, 0.3589, 0.3599,
        -22.1, 0.3600, 0.3611,
        -22.0, 0.3612, 0.3623,
        -21.9, 0.3624, 0.3635,
        -21.8, 0.3636, 0.3647,
        -21.7, 0.3648, 0.3659,
        -21.6, 0.3660, 0.3671,
        -21.5, 0.3672, 0.3683,
        -21.4, 0.3684, 0.3695,
        -21.3, 0.3696, 0.3707,
        -21.2, 0.3708, 0.3719,
        -21.1, 0.3720, 0.3731,
        -21.0, 0.3732, 0.3743,
        -20.9, 0.3744, 0.3755,
        -20.8, 0.3756, 0.3768,
        -20.7, 0.3769, 0.3780,
        -20.6, 0.3781, 0.3792,
        -20.5, 0.3793, 0.3804,
        -20.4, 0.3805, 0.3817,
        -20.3, 0.3818, 0.3829,
        -20.2, 0.3830, 0.3842,
        -20.1, 0.3843, 0.3854,
        -20.0, 0.3855, 0.3867,
        -19.9, 0.3868, 0.3879,
        -19.8, 0.3880, 0.3892,
        -19.7, 0.3893, 0.3904,
        -19.6, 0.3905, 0.3917,
        -19.5, 0.3918, 0.3930,
        -19.4, 0.3931, 0.3942,
        -19.3, 0.3943, 0.3955,
        -19.2, 0.3956, 0.3968,
        -19.1, 0.3969, 0.3981,
        -19.0, 0.3982, 0.3994,
        -18.9, 0.3995, 0.4007,
        -18.8, 0.4008, 0.4020,
        -18.7, 0.4021, 0.4033,
        -18.6, 0.4034, 0.4046,
        -18.5, 0.4047, 0.4059,
        -18.4, 0.4060, 0.4072,
        -18.3, 0.4073, 0.4085,
        -18.2, 0.4086, 0.4099,
        -18.1, 0.4100, 0.4112,
        -18.0, 0.4113, 0.4125,
        -17.9, 0.4126, 0.4139,
        -17.8, 0.4140, 0.4152,
        -17.7, 0.4153, 0.4165,
        -17.6, 0.4166, 0.4179,
        -17.5, 0.4180, 0.4192,
        -17.4, 0.4193, 0.4206,
        -17.3, 0.4207, 0.4220,
        -17.2, 0.4221, 0.4233,
        -17.1, 0.4234, 0.4247,
        -17.0, 0.4248, 0.4261,
        -16.9, 0.4262, 0.4275,
        -16.8, 0.4276, 0.4289,
        -16.7, 0.4290, 0.4303,
        -16.6, 0.4304, 0.4317,
        -16.5, 0.4318, 0.4331,
        -16.4, 0.4332, 0.4345,
        -16.3, 0.4346, 0.4359,
        -16.2, 0.4360, 0.4373,
        -16.1, 0.4374, 0.4387,
        -16.0, 0.4388, 0.4402,
        -15.9, 0.4403, 0.4416,
        -15.8, 0.4417, 0.4431,
        -15.7, 0.4432, 0.4445,
        -15.6, 0.4446, 0.4460,
        -15.5, 0.4461, 0.4474,
        -15.4, 0.4475, 0.4489,
        -15.3, 0.4490, 0.4504,
        -15.2, 0.4505, 0.4519,
        -15.1, 0.4520, 0.4533,
        -15.0, 0.4534, 0.4548,
        -14.9, 0.4549, 0.4563,
        -14.8, 0.4564, 0.4578,
        -14.7, 0.4579, 0.4593,
        -14.6, 0.4594, 0.4609,
        -14.5, 0.4610, 0.4624,
        -14.4, 0.4625, 0.4639,
        -14.3, 0.4640, 0.4655,
        -14.2, 0.4656, 0.4670,
        -14.1, 0.4671, 0.4686,
        -14.0, 0.4687, 0.4701,
        -13.9, 0.4702, 0.4717,
        -13.8, 0.4718, 0.4733,
        -13.7, 0.4734, 0.4748,
        -13.6, 0.4749, 0.4764,
        -13.5, 0.4765, 0.4780,
        -13.4, 0.4781, 0.4796,
        -13.3, 0.4797, 0.4812,
        -13.2, 0.4813, 0.4829,
        -13.1, 0.4830, 0.4845,
        -13.0, 0.4846, 0.4861,
        -12.9, 0.4862, 0.4878,
        -12.8, 0.4879, 0.4894,
        -12.7, 0.4895, 0.4911,
        -12.6, 0.4912, 0.4928,
        -12.5, 0.4929, 0.4944,
        -12.4, 0.4945, 0.4961,
        -12.3, 0.4962, 0.4978,
        -12.2, 0.4979, 0.4995,
        -12.1, 0.4996, 0.5012,
        -12.0, 0.5013, 0.5030,
        -11.9, 0.5031, 0.5047,
        -11.8, 0.5048, 0.5065,
        -11.7, 0.5066, 0.5082,
        -11.6, 0.5083, 0.5100,
        -11.5, 0.5101, 0.5118,
        -11.4, 0.5119, 0.5135,
        -11.3, 0.5136, 0.5153,
        -11.2, 0.5154, 0.5172,
        -11.1, 0.5173, 0.5190,
        -11.0, 0.5191, 0.5208,
        -10.9, 0.5209, 0.5227,
        -10.8, 0.5228, 0.5245,
        -10.7, 0.5246, 0.5264,
        -10.6, 0.5265, 0.5283,
        -10.5, 0.5284, 0.5302,
        -10.4, 0.5303, 0.5321,
        -10.3, 0.5322, 0.5340,
        -10.2, 0.5341, 0.5359,
        -10.1, 0.5360, 0.5379,
        -10.0, 0.5380, 0.5398,
        -9.9, 0.5399, 0.5418,
        -9.8, 0.5419, 0.5438,
        -9.7, 0.5439, 0.5458,
        -9.6, 0.5459, 0.5478,
        -9.5, 0.5479, 0.5499,
        -9.4, 0.5500, 0.5519,
        -9.3, 0.5520, 0.5540,
        -9.2, 0.5541, 0.5561,
        -9.1, 0.5562, 0.5582,
        -9.0, 0.5583, 0.5603,
        -8.9, 0.5604, 0.5625,
        -8.8, 0.5626, 0.5646,
        -8.7, 0.5647, 0.5668,
        -8.6, 0.5669, 0.5690,
        -8.5, 0.5691, 0.5712,
        -8.4, 0.5713, 0.5735,
        -8.3, 0.5736, 0.5757,
        -8.2, 0.5758, 0.5780,
        -8.1, 0.5781, 0.5803,
        -8.0, 0.5804, 0.5827,
        -7.9, 0.5828, 0.5850,
        -7.8, 0.5851, 0.5874,
        -7.7, 0.5875, 0.5898,
        -7.6, 0.5899, 0.5923,
        -7.5, 0.5924, 0.5947,
        -7.4, 0.5948, 0.5972,
        -7.3, 0.5973, 0.5997,
        -7.2, 0.5998, 0.6023,
        -7.1, 0.6024, 0.6049,
        -7.0, 0.6050, 0.6075,
        -6.9, 0.6076, 0.6102,
        -6.8, 0.6103, 0.6128,
        -6.7, 0.6129, 0.6156,
        -6.6, 0.6157, 0.6183,
        -6.5, 0.6184, 0.6212,
        -6.4, 0.6213, 0.6240,
        -6.3, 0.6241, 0.6269,
        -6.2, 0.6270, 0.6298,
        -6.1, 0.6299, 0.6328,
        -6.0, 0.6329, 0.6359,
        -5.9, 0.6360, 0.6389,
        -5.8, 0.6390, 0.6420,
        -5.7, 0.6421, 0.6450,
        -5.6, 0.6451, 0.6481,
        -5.5, 0.6482, 0.6511,
        -5.4, 0.6512, 0.6542,
        -5.3, 0.6543, 0.6572,
        -5.2, 0.6573, 0.6603,
        -5.1, 0.6604, 0.6633,
        -5.0, 0.6634, 0.6663,
        -4.9, 0.6664, 0.6694,
        -4.8, 0.6695, 0.6724,
        -4.7, 0.6725, 0.6755,
        -4.6, 0.6756, 0.6785,
        -4.5, 0.6786, 0.6816,
        -4.4, 0.6817, 0.6846,
        -4.3, 0.6847, 0.6877,
        -4.2, 0.6878, 0.6907,
        -4.1, 0.6908, 0.6938,
        -4.0, 0.6939, 0.6968,
        -3.9, 0.6969, 0.6999,
        -3.8, 0.7000, 0.7029,
        -3.7, 0.7030, 0.7060,
        -3.6, 0.7061, 0.7090,
        -3.5, 0.7091, 0.7120,
        -3.4, 0.7121, 0.7151,
        -3.3, 0.7152, 0.7181,
        -3.2, 0.7182, 0.7212,
        -3.1, 0.7213, 0.7242,
        -3.0, 0.7243, 0.7273,
        -2.9, 0.7274, 0.7303,
        -2.8, 0.7304, 0.7334,
        -2.7, 0.7335, 0.7364,
        -2.6, 0.7365, 0.7395,
        -2.5, 0.7396, 0.7425,
        -2.4, 0.7426, 0.7456,
        -2.3, 0.7457, 0.7486,
        -2.2, 0.7487, 0.7517,
        -2.1, 0.7518, 0.7547,
        -2.0, 0.7548, 0.7577,
        -1.9, 0.7578, 0.7608,
        -1.8, 0.7609, 0.7638,
        -1.7, 0.7639, 0.7669,
        -1.6, 0.7670, 0.7699,
        -1.5, 0.7700, 0.7730,
        -1.4, 0.7731, 0.7760,
        -1.3, 0.7761, 0.7791,
        -1.2, 0.7792, 0.7821,
        -1.1, 0.7822, 0.7852,
        -1.0, 0.7853, 0.7882,
        -0.9, 0.7883, 0.7913,
        -0.8, 0.7914, 0.7943,
        -0.7, 0.7944, 0.7974,
        -0.6, 0.7975, 0.8004,
        -0.5, 0.8005, 0.8034,
        -0.4, 0.8035, 0.8065,
        -0.3, 0.8066, 0.8095,
        -0.2, 0.8096, 0.8126,
        -0.1, 0.8127, 0.8156,
        0.0, 0.8157, 0.8187,
        0.1, 0.8188, 0.8217,
        0.2, 0.8218, 0.8248,
        0.3, 0.8249, 0.8278,
        0.4, 0.8279, 0.8309,
        0.5, 0.8310, 0.8339,
        0.6, 0.8340, 0.8370,
        0.7, 0.8371, 0.8400,
        0.8, 0.8401, 0.8431,
        0.9, 0.8432, 0.8461,
        1.0, 0.8462, 0.8491,
        1.1, 0.8492, 0.8522,
        1.2, 0.8523, 0.8552,
        1.3, 0.8553, 0.8583,
        1.4, 0.8584, 0.8613,
        1.5, 0.8614, 0.8644,
        1.6, 0.8645, 0.8674,
        1.7, 0.8675, 0.8705,
        1.8, 0.8706, 0.8735,
        1.9, 0.8736, 0.8766,
        2.0, 0.8767, 0.8796,
        2.1, 0.8797, 0.8827,
        2.2, 0.8828, 0.8857,
        2.3, 0.8858, 0.8887,
        2.4, 0.8888, 0.8918,
        2.5, 0.8919, 0.8948,
        2.6, 0.8949, 0.8979,
        2.7, 0.8980, 0.9009,
        2.8, 0.9010, 0.9040,
        2.9, 0.9041, 0.9070,
        3.0, 0.9071, 0.9101,
        3.1, 0.9102, 0.9131,
        3.2, 0.9132, 0.9162,
        3.3, 0.9163, 0.9192,
        3.4, 0.9193, 0.9223,
        3.5, 0.9224, 0.9253,
        3.6, 0.9254, 0.9284,
        3.7, 0.9285, 0.9314,
        3.8, 0.9315, 0.9344,
        3.9, 0.9345, 0.9375,
        4.0, 0.9376, 0.9405,
        4.1, 0.9406, 0.9436,
        4.2, 0.9437, 0.9466,
        4.3, 0.9467, 0.9497,
        4.4, 0.9498, 0.9527,
        4.5, 0.9528, 0.9558,
        4.6, 0.9559, 0.9588,
        4.7, 0.9589, 0.9619,
        4.8, 0.9620, 0.9649,
        4.9, 0.9650, 0.9680,
        5.0, 0.9681, 0.9710,
        5.1, 0.9711, 0.9741,
        5.2, 0.9742, 0.9771,
        5.3, 0.9772, 0.9801,
        5.4, 0.9802, 0.9832,
        5.5, 0.9833, 0.9862,
        5.6, 0.9863, 0.9893,
        5.7, 0.9894, 0.9923,
        5.8, 0.9924, 0.9954,
        5.9, 0.9955, 0.9984,
        6.0, 0.9985, 1.0000
    )

    private val sampleSize = params.size / 3
    private fun db(idx: Int) = params[idx * 3 + 0]
    private fun faderMin(idx: Int) = params[idx * 3 + 1]
    private fun faderMax(idx: Int) = params[idx * 3 + 2]

    init {
        for (i in 0 until sampleSize) {
            if (i == 0) continue
            if (faderMax(i - 1) >= faderMin(i)) {
                error("db=${db(i)} faderMax ${faderMax(i - 1)} >= faderMin ${faderMin(i)}")
            }
        }
    }

//    @Suppress("unused")
//    fun fromFader(fader: Double): String {
//        if (fader <= 0.0) return "-∞ dB"
//        if (fader >= 1.0) return "+6 dB"
//        fun Double.formatDb() = String.format("%.1f dB", this)
//        var width = sampleSize
//        var start = 0
//        while (width > 0) {
//            val width2 = (width shr 1)
//            val idx = start + width2
//            if (fader < faderMin(idx)) {
//                width = width2
//                continue
//            } else if (fader > faderMax(idx)) {
//                val skip = width2 + 1
//                width -= skip
//                start += skip
//            } else {
//                return db(idx).formatDb()
//            }
//        }
//        var findDelta = Double.MAX_VALUE
//        var findDb: Double? = null
//        for (i in IntRange(max(0, start - 1), min(sampleSize - 1, start + 1))) {
//            val delta = abs(fader - (faderMax(i) + faderMin(i)) / 2.0)
//            if (delta < findDelta) {
//                findDelta = delta
//                findDb = db(i)
//            }
//        }
//        return findDb?.formatDb() ?: "?? dB"
//    }

    fun Float.toFader(): Double {
        val db = this
        if (db < -65f) return 0.0
        if (db >= 6f) return 1.0
        if (db == 0f) return 0.81720435
        var width = sampleSize
        var start = 0
        while (width > 0) {
            val width2 = (width shr 1)
            val idx = start + width2
            if (db < db(idx)) {
                width = width2
                continue
            } else if (db > db(idx)) {
                val skip = width2 + 1
                width -= skip
                start += skip
            } else {
                return (faderMin(idx) + faderMax(idx)) * 0.5
            }
        }
        var findDelta = Double.MAX_VALUE
        var findFader: Double? = null
        for (i in IntRange(max(0, start - 1), min(sampleSize - 1, start + 1))) {
            val delta = abs(db - db(i))
            if (delta < findDelta) {
                findDelta = delta
                findFader = (faderMax(i) + faderMin(i)) * 0.5
            }
        }
        return findFader ?: 0.0
    }
}
